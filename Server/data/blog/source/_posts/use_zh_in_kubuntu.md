title: Kubuntu中文问题
author: Walker
tags:
  - Konsole
  - Linux
  - Kubuntu
categories: []
date: 2017-08-13 01:32:00
---
折腾了两三个小时，终于解决了Kubuntu下Konsole终端使用ibus无法输入中文的如下问题了。
1.  终端无法输入中文
2.  终端输入中文乱码
3.  终端中文字符下沉或者光标错位

比较喜欢KDE的桌面所以一直在折腾这个问题，差点就放弃了，还好成功了。接下来简单说明上面三个问题分别是如何解决的。

#### 1. 终端无法输入中文
只需要在用户主目录的下的.bashrc文件下添加如下内容，设置相关环境变量为ibus即可。
```
export GTK_IM_MODULE=ibus
export XMODIFIERS=@im=ibus
export QT_IM_MODULE=ibus
```


#### 2. 终端输入中文乱码
解决了上面的问题之后，在konsole下就可以输入中文了，但是此时会发现输入中文后会出现乱码，这个问题可以通过选择一种支持中文的字体就行了。但实际使用中还是会出现一开始能够输入中文，按下Enter键后又出现乱码了，并且回删的时候只能删除半个中文，还会出现命令行前面的字符被删掉的情况，发现我是没有添加中文支持的，可以在系统设置的区域设置那里将中文简体添加到语言支持上，应该就能解决问题的。

#### 3. 终端中文字符下沉或者光标错位
在这个问题上纠结的是最久的，查了网上的解决方式，基本都是修改Konsole配置选择一个等宽字体解决的，但是我发现在Konsole的配置中可选的字体非常少，并且新安装的字体也不会在上面显示，但是在Kate中修改了配置中的字体后则能够解决中文字符下沉的问题。
最后自己在选择系统配置的字体的时候，发现了一个选项就是可以将这里的字体应用到所有程序上的选项，在上面选了文泉驿字体并设置之后可以发现能够输入中文并且不会出现下沉了。不过输入英文的时候会出现光标错位的问题，可能是因为字体的兼容性问题，此时将字体改为等宽（mono space）再测试，ok了！终于一切都正常了。
![http://oudii2u1j.bkt.clouddn.com/blog/hexo-resolve-font.png](http://oudii2u1j.bkt.clouddn.com/blog/hexo-resolve-font.png)